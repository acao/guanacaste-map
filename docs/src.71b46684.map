{"version":3,"sources":["src/components/popup.js","src/components/legend.js","src/config.js","src/utils.js","src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["feature","properties","link","Estación","Image","description","allLayers","map","layer","name","type","layerId","color","label","join","MAP","style","center","zoom","ACCESS_TOKEN","module","exports","LAYER_ID","SYMBOL_LAYERS","ANIMATION_DURATION","LEGEND_TITLE","SOURCE_TYPES","LAYERS","getVisibleLayers","layerList","filter","id","substring","reduce","agg","result","Object","assign","DEFAULT_MAP","container","mapboxgl","accessToken","Map","window","tcat","toggleLegend","legendEl","document","getElementById","classList","toggle","popup","Popup","showPopup","setLngLat","geometry","coordinates","setHTML","addTo","on","flyTo","duration","e","features","setTimeout","addControl","FullscreenControl","createCompass","leftEl","querySelector","compass","createElement","innerHTML","onclick","appendChild","visibleLayers","nav","NavigationControl","showCompass","scrollZoom","disable","getStyle","layers","filteredLayers","layerName","legend","handleFilter","layerOrSymbolType","legendItem","activeSymbolLayers","keys","key","length","setLayoutProperty","setFilter","isToggledOn","noFilter","body","addEventListener","event","metaKey","ctrlKey","enable","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","bundle","require","updateLink","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","i"],"mappings":"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","file":"src.71b46684.map","sourceRoot":"..","sourcesContent":["export default feature =>\n  `<div class=\"popup-header\">\n    <h3>\n        <a\n          href=\"${feature.properties.link}\"\n          >\n          ${feature.properties.Estación}\n        </a>\n    </h3>\n    <div class=\"popup-image\">\n        <a\n          href=\"${feature.properties.link}\"\n          >\n          <img\n            src=\"${feature.properties.Image}\"\n            alt=\"Image del Estación ${feature.properties.Estación}\"\n          />\n        </a>\n      \n    </div>\n  </div>\n  <div class=\"popup-content\">\n    <div class=\"popup-description\">\n      <p>${feature.properties.description}</p>\n    </div>\n    <a\n      class=\"popup-button\"\n      href=\"${feature.properties.link}\"\n      >\n      Más informacíon\n    </a>\n  </div>\n  `;\n","export default allLayers =>\n  `<div class=\"flex-child\">\n\t    <h4 class=\"overlay-box toggle-button\" onClick=\"tcat.toggleLegend()\">Puestos Estaciónes y Tourismos</h4>\n\t\t\t<div id=\"legend-items\" class=\"overlay-box toggle-content\">\n          ${allLayers\n            .map(\n              layer => `<div class=\"legend-item active\" id=\"${\n                layer.name\n              }\" onClick=\"tcat.handleFilter('${layer.name}', '${layer.type || 'symbol'}', ${\n                layer.layerId ? `'${layer.layerId}'` : null\n              })\">\n                  <span class=\"legend-key\" style=\"background-color: ${layer.color}\"></span>\n                  <span class=\"label\">${layer.label}</span>\n                </div>`\n            )\n            .join('')}\n\n\t\t\t</div>\n      <div id=\"legend-footer\" class=\"overlay-box toggle-content\">\n        <div onClick=\"tcat.noFilter()\">Ver Todo</div>\n      </div>\n\t</div>`;\n","const MAP = {\n  // for creating mapboxgl.Map(). container defaults to 'map'\n  style: 'mapbox://styles/guanacaste/cjj079axn0aqu2so55fx6ln2x',\n  center: [-85.61365526723557, 10.838261234356153],\n  zoom: 9.619976883678385\n  //\"sprite\": \"mapbox://sprites/mapbox/bright-v8\"\n};\n\nconst ACCESS_TOKEN =\n  'pk.eyJ1IjoiZ3VhbmFjYXN0ZSIsImEiOiJjamowNzhuYnAwZXU2M2txczhsc21mbDVsIn0.amJMu3O1jfjcbg-B1qC7ww';\n\nmodule.exports = {\n  LAYER_ID: 'toggle-turismo',\n  SYMBOL_LAYERS: ['toggle-turismo', 'toggle-ecosistemas'],\n  //FLY_TO_ZOOM_LEVEL: 9.619976883678385,\n  ANIMATION_DURATION: 2000,\n  LEGEND_TITLE: 'Puestos Estaciónes y Tourismos',\n  ACCESS_TOKEN,\n  MAP,\n  SOURCE_TYPES: [\n    {\n      name: 'biological',\n      layerId: 'toggle-turismo',\n      label: 'Biological'\n    },\n    {\n      layerId: 'toggle-turismo',\n      name: 'tourist',\n      label: 'Touristo'\n    }\n  ],\n  LAYERS: {\n    'toggle-turismo': { label: 'Turismo', color: '#CCCC00' },\n    'toggle-unesco': { label: 'UNESCO', color: '#CCCC00' },\n    'toggle-sectores': { label: 'Sectores', color: '#449438' },\n    'toggle-ecosistemas': { label: 'Ecosistemas', color: '#000000' }\n  }\n};\n","import { SOURCE_TYPES } from './config';\n\nexport const getVisibleLayers = layerList =>\n  layerList.filter(({ id }) => id.substring(0, 7) === 'toggle-').reduce((agg, layer) => {\n    let result = { [layer.id]: true };\n    if (layer.id === 'toggle-turismo') {\n      result[layer.id] = SOURCE_TYPES.filter(({ layerId }) => layerId === layer.id).reduce(\n        (agg, { name }) => Object.assign({ [name]: true }, agg),\n        {}\n      );\n    }\n    return Object.assign(result, agg);\n  }, {});\n","/* global mapboxgl */\n/* eslint-disable no-irregular-whitespace */\n\nimport popupComponent from './components/popup';\nimport legendComponent from './components/legend';\nimport { getVisibleLayers } from './utils';\nimport '../assets/styles/index.scss';\nimport { MAP, LAYER_ID, ANIMATION_DURATION, SOURCE_TYPES, LAYERS } from './config';\n\nconst DEFAULT_MAP = {\n  container: 'map',\n  style: 'mapbox://styles/guanacaste/cjj079axn0aqu2so55fx6ln2x',\n  center: [-85.61365526723557, 10.838261234356153],\n  zoom: 9.619976883678385\n};\nmapboxgl.accessToken =\n  'pk.eyJ1IjoiZ3VhbmFjYXN0ZSIsImEiOiJjamowNzhuYnAwZXU2M2txczhsc21mbDVsIn0.amJMu3O1jfjcbg-B1qC7ww';\n\n// instantiate the map instance\nconst map = new mapboxgl.Map(\n  // Set defaults, allow the config to override\n  Object.assign(DEFAULT_MAP, MAP)\n);\n// debugging only\n// window.map = map;\nwindow.tcat = window.tcat || {};\n\nwindow.tcat.toggleLegend = () => {\n  const legendEl = document.getElementById('legend');\n  legendEl.classList.toggle('active');\n};\n\n// HANDLE POPUPS\n\nconst popup = new mapboxgl.Popup();\n\n// Create a mapboxgl.Popup from the default popup component.\nconst showPopup = feature => {\n  popup\n    .setLngLat(feature.geometry.coordinates)\n    .setHTML(popupComponent(feature))\n    .addTo(map);\n  popup.on('close', () => {\n    map.flyTo({\n      center: DEFAULT_MAP.center,\n      duration: ANIMATION_DURATION\n    });\n  });\n\n  return popup;\n};\n\n// HANDLE MAP EVENTS\n\nmap.on('click', LAYER_ID, e => {\n  const feature = e.features[0];\n  setTimeout(() => {\n    map.flyTo({\n      center: feature.geometry.coordinates,\n      duration: ANIMATION_DURATION\n    });\n    showPopup(feature);\n  }, 200);\n});\n\n//FULL SCREEN MODE\n\nmap.addControl(new mapboxgl.FullscreenControl());\n\n// function createLegend() {\n//  const legendEl\n//}\n\n//Create Compass Button that Flys to Center\nfunction createCompass() {\n  const leftEl = document.querySelector('.mapboxgl-ctrl-bottom-left');\n  const compass = document.createElement('div');\n\n  compass.innerHTML = `<div class=\"mapboxgl-ctrl mapboxgl-ctrl-group\">\n      <button class=\"mapboxgl-ctrl-icon mapboxgl-ctrl-compass\" type=\"button\" aria-label=\"Reset North\"> \n      <span class=\"mapboxgl-ctrl-compass-arrow\" style=\"transform: rotate(0deg);\"></span> \n    </button> \n  </div>`;\n\n  compass.onclick = () => {\n    map.flyTo({\n      center: DEFAULT_MAP.center\n    });\n  };\n  leftEl.appendChild(compass);\n}\n\nlet visibleLayers = {};\n\nmap.on('load', () => {\n  const nav = new mapboxgl.NavigationControl({ showCompass: false });\n  map.addControl(nav, 'top-left');\n  map.scrollZoom.disable();\n  createCompass();\n\n  const layerList = map.getStyle().layers;\n\n  visibleLayers = getVisibleLayers(layerList);\n\n  let filteredLayers = layerList\n    .filter(layer => {\n      const layerName = layer.id;\n      if (layerName.substring(0, 7) === 'toggle-' && layerName !== 'toggle-turismo') {\n        return true;\n      }\n      return false;\n    })\n    .map(layer => ({\n      name: layer.id,\n      label: LAYERS[layer.id] ? LAYERS[layer.id].label : layer.id.substring(7),\n      type: 'layer',\n      color: LAYERS[layer.id] ? LAYERS[layer.id].color : 'darkgrey'\n    }));\n  const legend = document.getElementById(`legend`);\n\n  // This is where we combine the symbol layer SOURCE_TYPES with filteredLayers\n  legend.innerHTML = legendComponent([...SOURCE_TYPES, ...filteredLayers]);\n\n  // HANDLE MAP LOAD\n  window.tcat.handleFilter = (layerOrSymbolType, type = null, layerId = null) => {\n    // Toggle Active Class\n    const legendItem = document.getElementById(layerOrSymbolType);\n    legendItem.classList.toggle('active');\n    // If Symbol, toggle for the symbol in the layer filter\n    if (type === 'symbol' && layerId) {\n      visibleLayers[layerId][layerOrSymbolType] = !visibleLayers[layerId][layerOrSymbolType];\n\n      const activeSymbolLayers = Object.keys(visibleLayers[layerId]).filter(\n        key => visibleLayers[layerId][key]\n      );\n      if (activeSymbolLayers.length > 0) {\n        map.setLayoutProperty(layerId, 'visibility', 'visible');\n      }\n      if (activeSymbolLayers.length > 1) {\n        return map.setFilter(layerId, ['in', 'symbol', ...activeSymbolLayers]);\n      }\n      if (activeSymbolLayers.length === 1) {\n        return map.setFilter(layerId, ['==', 'symbol', activeSymbolLayers[0]]);\n      }\n      // TODO: Until we figure out how to setFilter of none?\n      return map.setLayoutProperty(layerId, 'visibility', 'none');\n    }\n    visibleLayers[layerOrSymbolType] = !visibleLayers[layerOrSymbolType];\n    const isToggledOn = visibleLayers[layerOrSymbolType];\n\n    // Toggle Layers\n    map.setLayoutProperty(layerOrSymbolType, 'visibility', isToggledOn ? 'visible' : 'none');\n    return;\n  };\n\n  window.tcat.noFilter = () => {\n    filteredLayers.map(layer => map.setLayoutProperty(layer.name, 'visibility', 'visible'));\n    filteredLayers.map(({ name }) => map.setFilter(name, null));\n    visibleLayers = getVisibleLayers(layerList);\n    const legend = document.getElementById(`legend`);\n    // This is where we combine the symbol layer SOURCE_TYPES with filteredLayers\n    legend.innerHTML = legendComponent([...SOURCE_TYPES, ...filteredLayers]);\n  };\n});\n\n// Press Command to Scrollzoom\ndocument.body.addEventListener('keydown', function(event) {\n  const { metaKey, ctrlKey } = event;\n  if (metaKey || ctrlKey) {\n    map.scrollZoom.enable();\n  }\n});\ndocument.body.addEventListener('keyup', function(event) {\n  const { metaKey, ctrlKey } = event;\n  if (metaKey || ctrlKey) {\n    map.scrollZoom.disable();\n  }\n});\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}